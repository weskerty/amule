[Unit]
Description=aMuleD.bin AppImage&Web
After=network-online.target
Wants=network-online.target
StartLimitIntervalSec=300
StartLimitBurst=10

[Service]
Type=simple
User=levanter
Group=levanter
WorkingDirectory=/opt/aMuleD.bin/repo

Environment=HOME=/opt/aMuleD.bin/home
Environment=VOLTA_HOME=/opt/aMuleD.bin/home/.volta
Environment=PATH=/opt/aMuleD.bin/home/.volta/bin:/usr/local/bin:/usr/bin:/bin
Environment=NPM_CONFIG_PREFIX=/opt/aMuleD.bin/repo/node_modules/.bin

ExecStart=/opt/aMuleD.bin/repo/START.sh

Restart=always
RestartSec=30
RuntimeMaxSec=30d
KillMode=control-group

NoNewPrivileges=true
ProtectSystem=full
RestrictAddressFamilies=AF_INET AF_INET6 AF_UNIX
LockPersonality=true
ProtectKernelTunables=true
ProtectKernelModules=true
ProtectControlGroups=true
ProtectKernelLogs=true
ProtectProc=invisible
ProtectHome=true
PrivateDevices=true
RestrictNamespaces=true
RestrictSUIDSGID=true
CapabilityBoundingSet=
AmbientCapabilities=
#MemoryDenyWriteExecute=true

#UMask=0077
LimitNPROC=256
TasksMax=256
TimeoutStopSec=30
IOSchedulingPriority=4


MemoryHigh=300M
MemoryMax=500M
CPUQuota=20%
Nice=10
#CPUAffinity=0 1

[Install]
WantedBy=multi-user.target